<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Voxlblade Build Calculator</title>
  <style>
    body {
      font-family: Arial;
      background: #0f172a;
      color: #e5e7eb;
      padding: 20px;
    }
    h1 { color: #38bdf8; }
    select, button {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      font-size: 16px;
    }
    .box {
      background: #020617;
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h1>Voxlblade Build Calculator</h1>

<div class="box">
  <label>Weapon</label>
  <select id="weapon"></select>

  <label>Race</label>
  <select id="race"></select>

  <label>Perk 1</label>
  <select id="perk1"></select>

  <label>Perk 2</label>
  <select id="perk2"></select>

  <button onclick="calculate()">Calculate Build</button>

  <div id="result"></div>
</div>

<script>
// ======= RAÇAS =======
const races = [
  { name: "Human", value: "human", bonuses: { damageBoostUnder50HP: 0.20 }, special: "Bônus de dano e redução de dano quando HP < 50%" },
  { name: "High Elf", value: "highelf", bonuses: { attackSpeed: 0.10 }, special: "Weapon Arts mais rápidos" },
  { name: "Kitsune", value: "kitsune", bonuses: { attackSpeed: 0.10, moveSpeed: 0.10 }, special: "Mais rápido e ágil" },
  { name: "Half-Ork", value: "halfork", bonuses: { armorPen: 10 }, special: "Bônus de penetração de armadura" },
  { name: "Dark Elf", value: "darkelf", bonuses: { debuffChance: 0.08 }, special: "Chance de aplicar debuff aleatório" },
  { name: "Dragon-Blooded", value: "dragonblooded", bonuses: { warding: 0.50, protection: 10 }, special: "Alta resistência e proteção" },
  { name: "Ork", value: "ork", bonuses: { armorPenWeaponArts: 10, tenacity: 0.2 }, special: "Bônus em Weapon Arts e Tenacity" },
  { name: "Elf", value: "elf", bonuses: { runeCooldownReduction: 0.40 }, special: "Redução de cooldown das Runes" },
  { name: "Arborian", value: "arborian", bonuses: { fireDefReduction: 0.50, protection: 15 }, special: "Proteção e regeneração" },
  { name: "Bunikin", value: "bunikin", bonuses: { jumpBonus: 5, dodgeCrit: true }, special: "Esquiva garante crítico" }
];

// ======= ARMAS =======
const weapons = [
  { name: "Gilded Pole", value: "gildedpole", baseDamage: 12, attackSpeed: 1.0, critChance: 0.05, critDamage: 1.5, armorPen: 5 },
  { name: "Reinforced Pole", value: "reinforcedpole", baseDamage: 11, attackSpeed: 1.0, critChance: 0.05, critDamage: 1.5, armorPen: 6 },
  { name: "Oak Bow", value: "oakbow", baseDamage: 40, attackSpeed: 1.2, critChance: 0.08, critDamage: 1.5, armorPen: 2 },
  { name: "Fire Staff", value: "firestaff", baseDamage: 60, attackSpeed: 0.9, critChance: 0.12, critDamage: 1.6, armorPen: 0 }
];

// ======= PERKS =======
const perks = [
  { name: "Sharpshooter", type: "critChance", value: 0.05, description: "Aumenta 5% de chance de crítico" },
  { name: "Berserker", type: "damage", value: 0.10, description: "Aumenta 10% de dano total" },
  { name: "Swift Footed", type: "attackSpeed", value: 0.10, description: "Aumenta 10% de velocidade de ataque" },
  { name: "Fortified", type: "protection", value: 5, description: "Aumenta 5 pontos de proteção" },
  { name: "Armor Breaker", type: "armorPen", value: 5, description: "Aumenta penetração de armadura em 5" },
  { name: "Elementalist", type: "elementalDamage", value: 0.15, description: "Aumenta 15% de dano elemental" },
  { name: "Critical Mastery", type: "critDamage", value: 0.25, description: "Aumenta 25% de dano crítico" }
];

// ======= POPULAR DROPDOWNS =======
const raceSelect = document.getElementById("race");
races.forEach(race => {
  const option = document.createElement("option");
  option.value = race.value;
  option.text = race.name;
  raceSelect.add(option);
});

const weaponSelect = document.getElementById("weapon");
weapons.forEach(w => {
  const option = document.createElement("option");
  option.value = w.value;
  option.text = w.name;
  weaponSelect.add(option);
});

const perk1Select = document.getElementById("perk1");
const perk2Select = document.getElementById("perk2");
perks.forEach(p => {
  [perk1Select, perk2Select].forEach(select => {
    const option = document.createElement("option");
    option.value = p.name;
    option.text = p.name;
    select.add(option);
  });
});

// ======= CÁLCULO DE DPS =======
const playerMaxHP = 100;
let playerHP = 100; // ajustar dinamicamente depois

function calculate() {
  const weaponValue = document.getElementById("weapon").value;
  const raceValue = document.getElementById("race").value;
  const perk1Value = document.getElementById("perk1").value;
  const perk2Value = document.getElementById("perk2").value;

  const selectedWeapon = weapons.find(w => w.value === weaponValue);
  const selectedRace = races.find(r => r.value === raceValue);
  const selectedPerk1 = perks.find(p => p.name === perk1Value);
  const selectedPerk2 = perks.find(p => p.name === perk2Value);

  let dmg = selectedWeapon.baseDamage;
  let speed = selectedWeapon.attackSpeed;
  let critChance = selectedWeapon.critChance;
  let critDamage = selectedWeapon.critDamage;
  let armorPen = selectedWeapon.armorPen || 0;
  let protection = 0;

  // Bônus de raça
  if(selectedRace.value === "human" && playerHP < 0.5 * playerMaxHP){
      dmg *= 1 + (selectedRace.bonuses.damageBoostUnder50HP || 0);
  }
  if(selectedRace.bonuses.attackSpeed) speed *= 1 + selectedRace.bonuses.attackSpeed;
  if(selectedRace.bonuses.armorPenWeaponArts) armorPen += selectedRace.bonuses.armorPenWeaponArts;

  // Aplicar perks
  [selectedPerk1, selectedPerk2].forEach(p => {
    if(!p) return;
    switch(p.type){
      case "damage": dmg *= 1 + p.value; break;
      case "attackSpeed": speed *= 1 + p.value; break;
      case "critChance": critChance += p.value; break;
      case "critDamage": critDamage += p.value; break;
      case "armorPen": armorPen += p.value; break;
      case "protection": protection += p.value; break;
    }
  });

  const dps = dmg * speed * (1 + critChance * (critDamage - 1));

  document.getElementById("result").innerHTML =
    `<h3>DPS Final</h3>
     <p><strong>${dps.toFixed(2)}</strong></p>
     <p>Raça: ${selectedRace.name}</p>
     <p>Arma: ${selectedWeapon.name}</p>
     <p>Perk 1: ${selectedPerk1 ? selectedPerk1.name : "Nenhum"}</p>
     <p>Perk 2: ${selectedPerk2 ? selectedPerk2.name : "Nenhum"}</p>
     <p>Proteção total: ${protection}</p>
     <p>Penetração de armadura: ${armorPen}</p>
     <p>Especial da raça: ${selectedRace.special}</p>`;
}
</script>

</body>
</html>
